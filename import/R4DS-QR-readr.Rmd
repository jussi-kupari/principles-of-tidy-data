---
title: "R4DS-QuickRef -- Ch2 Importing Data: readr"
output: html_notebook
---

```{r}
library(readr)
```

## Functions for Reading Data

**The readr package provides the following functions for reading tabular data:**

read_csv() Comma-separated values

read_csv2() Semicolon-separated values

read_tsv() Tab-separated values

read_delim() General column delimiters

read_table() Space-separated values (fixed-length columns)

read_table2() Space-separated values (variable-length columns)

```{r}
# basic usage of read_csv
(data <- read_csv("data/data.csv"))
```

```{r}
# You can get information about inferred types using the spec() function:
spec(data)
```

```{r}
# If you don't want the type inference info then do
read_csv("data/data.csv", show_col_types = FALSE)
```

```{r}
# For tab-separated files read_csv doesn't work
read_csv("data/data.tsv")
```

```{r}
# Use read_tsv instead
read_tsv("data/data.tsv")
```

```{r}
# Compressed (.gz, .bz2, .xz, or .zip) files will be uncompressed by read_csv.
read_csv("data/data.csv.gz", show_col_types = FALSE)
```

```{r}
# a URL (http://, https://, ftp://, or ftps://) file will automatically be downloaded
read_csv(
  "https://basv53.uni.lu/lectures/data/example.csv",
  show_col_types = FALSE
  )
```

```{r}
# You can also provide a string as the file object.
# This is rarely useful in a data analysis project, but you can use it to create 
# examples or for debugging.
read_csv(
  "A, B, C, D
 1, a, a, 1.2
 2, b, b, 2.1
 3, c, c, 13.0
",
show_col_types = FALSE
)
```

```{r}
# You can use read_delim as a general import function
# You can give it the delimiter, or let it guess
read_delim("data/data.csv")
```

```{r}
read_delim("data/data.csv", delim = ",")
```

```{r}
read_delim("data/data.tsv")
```


## File Headers

```{r}
# If the first line is not column names, you can use the option col_names = FALSE.
# Note that all columns now have type <chr> because the header is part of the data
read_csv(
  "data/data.csv", 
  col_names = FALSE, 
  show_col_types = FALSE
)
```

```{r}
# Without the header we would get the result as before, with autogenerated names 
read_csv(
  "1, a, a, 1.2
   2, b, b, 2.1
   3, c, c, 13.0",
show_col_types = FALSE,
col_names = FALSE
)
```
```{r}
# If you want to provide names yourself, use col_names with a vector of names
read_csv(
  "1, a, a, 1.2
   2, b, b, 2.1
   3, c, c, 13.0",
show_col_types = FALSE,
col_names = c("X", "Y", "Z", "W")
)
```

```{r}
# To rename columns in a file that has names, you must skip the original names
read_csv(
  "data/data.csv",
  show_col_types = FALSE,
  skip = 1,
  col_names = c("X", "Y", "Z", "W")
)
```
```{r}
# You can also limit the number of rows to be read using n_max
read_csv(
  "data/data.csv",
  show_col_types = FALSE,
  skip = 1,
  col_names = c("X", "Y", "Z", "W"),
  n_max = 2
)
```

```{r}
# You can skip possible comments if you provide the comment option:
read_csv(
 "A, B, C, D   # this is a comment
  1, a, a, 1.2 # another comment
  2, b, b, 2.1
  3, c, c, 13.0",
 comment = "#",
 show_col_types = FALSE
 )
```

```{r}
# You can have a full line comment, but it must start at the left edge
# Here you will get a warning 
read_csv(
 "A, B, C, D   
 # this is a comment that doesn't start from the very left
  1, a, a, 1.2 # another comment
  2, b, b, 2.1
  3, c, c, 13.0",
 comment = "#",
 show_col_types = FALSE
 )
```

```{r}
# This works without warnings 
read_csv(
 "A, B, C, D   
# full line comment starting from the very left
  1, a, a, 1.2 # another comment
  2, b, b, 2.1
  3, c, c, 13.0",
 comment = "#",
 show_col_types = FALSE
 )
```
## Column Types 


















